<section class="shopping-cart">
    <h3>Shopping Cart</h3>

    <p-table [value]="cartItemsSignal()" responsiveLayout="scroll">
        <ng-template pTemplate="header">
            <tr>
                <th>Product</th>
                <th>Quantity (kg)</th>
                <th>Price (₪)</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>{{ item.product.name }}</td>
                <td>
                    <div class="quantity-controls">
                        <button pButton icon="pi pi-minus" (click)="decrease(item.product)" class="p-button-text"></button>
                        <span class="quantity">{{ item.quantity }}</span>
                        <button pButton icon="pi pi-plus" (click)="increase(item.product)" class="p-button-text"></button>
                    </div>
                </td>
                <td>{{ (item.product.price * item.quantity) | number:'1.2-2' }}</td>
                <td>
                    <button pButton icon="pi pi-trash" (click)="removeProduct(item.product)" class="p-button-danger"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <p-panel header="Cart Summary" class="cart-summary">
        <div class="summary-item">
            <span>Total Items:</span>
            <strong>{{ totalItems }}</strong>
        </div>
        <div class="summary-item">
            <span>Total Price:</span>
            <strong>{{ totalPrice | number:'1.2-2' }} ₪</strong>
        </div>
    </p-panel>

    <hr class="divider">

    <button pButton label="Save Cart" (click)="saveCart()" class="p-button-success"></button>
</section>
